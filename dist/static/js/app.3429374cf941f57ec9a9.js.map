{"version":3,"sources":["webpack:///static/js/app.3429374cf941f57ec9a9.js","webpack:///./src/components/Thread.vue","webpack:///ThreadSection.vue","webpack:///./src/components/Thread.vue?95bb","webpack:///./src/store/mutation-types.js","webpack:///./src/components/App.vue","webpack:///App.vue","webpack:///./src/components/App.vue?7635","webpack:///./src/store/index.js","webpack:///./src/main.js","webpack:///./src/components/Message.vue?032c","webpack:///./src/store/getters.js","webpack:///./src/components/ThreadSection.vue?3fd8","webpack:///./src/api/mock.js","webpack:///MessageSection.vue","webpack:///./src/components/MessageSection.vue","webpack:///./src/api/index.js","webpack:///./src/js/socket.js","webpack:///./src/components/MessageSection.vue?460f","webpack:///./src/store/actions.js","webpack:///Thread.vue","webpack:///./src/components/ThreadSection.vue","webpack:///./src/store/mutations.js","webpack:///Message.vue","webpack:///./src/components/Message.vue"],"names":["webpackJsonp","+skl","module","exports","/NAZ","__webpack_require__","Component","/dCH","Object","defineProperty","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_Thread","_Thread2","obj","__esModule","default","_vuex","name","components","Thread","computed","mapGetters","unreadCount","threads","this","keys","reduce","count","id","lastMessage","isRead","methods","switchThread","$store","dispatch","0","0n/d","1LZN","render","_vm","_h","$createElement","_c","_self","staticClass","class","active","on","click","$event","$emit","thread","_v","_s","_f","timestamp","text","staticRenderFns","Du/2","SWITCH_THREAD","RECEIVE_ALL","RECEIVE_MESSAGE","EWfp","EZYi","_interopRequireDefault","_ThreadSection","_ThreadSection2","_MessageSection","_MessageSection2","ThreadSection","MessageSection","data","modal1","formItem","ok","console","log","cancel","I01E","attrs","title","on-ok","on-cancel","model","callback","$$v","expression","label-position","label-width","label","placeholder","IcnI","_interopRequireWildcard","newObj","_vue","_vue2","_vuex2","_getters","getters","_actions","actions","_mutations","_mutations2","use","state","currentThreadID","messages","Store","mutations","NHnr","_App","_App2","_iview","_iview2","_store","_store2","filter","Date","toLocaleTimeString","el","h","getAllMessages","U7zJ","message","authorName","UjVw","currentThread","currentMessages","map","UnMP","directives","rawName","_l","switch-thread","VkeE","threadID","threadName","now","X1zg","_Message","_Message2","Message","sortedMessages","slice","sort","a","b","watch","thread.lastMessage","_this","$nextTick","ul","$refs","list","scrollTop","scrollHeight","sendMessage","e","trim","ZiNS","gyMJ","cb","createMessage","_ref","hnHT","_socket","_socket2","m8WK","ref","keyup","_k","keyCode","mUbh","undefined","_api","api","_mutationTypes","types","commit","_ref2","payload","_ref3","ne5N","props","Boolean","r3zk","ukYY","_defineProperty","enumerable","configurable","writable","createThread","set","addMessage","some","push","setCurrentThread","_types$RECEIVE_ALL$ty","latestMessage","forEach","vaj8","yJ2L"],"mappings":"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","file":"static/js/app.3429374cf941f57ec9a9.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"+skl\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"/NAZ\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"ne5N\"),\n  /* template */\n  __webpack_require__(\"1LZN\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"/dCH\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; //\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nvar _Thread = __webpack_require__(\"/NAZ\");\n\nvar _Thread2 = _interopRequireDefault(_Thread);\n\nvar _vuex = __webpack_require__(\"NYxO\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  name: 'ThreadSection',\n  components: { Thread: _Thread2.default },\n  computed: _extends({}, (0, _vuex.mapGetters)(['threads', 'currentThread']), {\n    unreadCount: function unreadCount() {\n      var threads = this.threads;\n      return Object.keys(threads).reduce(function (count, id) {\n        return threads[id].lastMessage.isRead ? count : count + 1;\n      }, 0);\n    }\n  }),\n  methods: {\n    switchThread: function switchThread(id) {\n      this.$store.dispatch('switchThread', { id: id });\n    }\n  }\n};\n\n/***/ }),\n\n/***/ 0:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ \"0n/d\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"1LZN\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('li', {\n    staticClass: \"thread-list-item\",\n    class: {\n      active: _vm.active\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.$emit('switch-thread', _vm.thread.id)\n      }\n    }\n  }, [_c('h5', {\n    staticClass: \"thread-name\"\n  }, [_vm._v(_vm._s(_vm.thread.name))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"thread-time\"\n  }, [_vm._v(\"\\n    \" + _vm._s(_vm._f(\"time\")(_vm.thread.lastMessage.timestamp)) + \"\\n  \")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"thread-last-message\"\n  }, [_vm._v(\"\\n    \" + _vm._s(_vm.thread.lastMessage.text) + \"\\n  \")])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ \"Du/2\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar SWITCH_THREAD = exports.SWITCH_THREAD = 'SWITCH_THREAD';\nvar RECEIVE_ALL = exports.RECEIVE_ALL = 'RECEIVE_ALL';\nvar RECEIVE_MESSAGE = exports.RECEIVE_MESSAGE = 'RECEIVE_MESSAGE';\n\n/***/ }),\n\n/***/ \"EWfp\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(\"0n/d\")\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"EZYi\"),\n  /* template */\n  __webpack_require__(\"I01E\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"EZYi\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _ThreadSection = __webpack_require__(\"r3zk\");\n\nvar _ThreadSection2 = _interopRequireDefault(_ThreadSection);\n\nvar _MessageSection = __webpack_require__(\"ZiNS\");\n\nvar _MessageSection2 = _interopRequireDefault(_MessageSection);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexports.default = {\n  name: 'App',\n  components: {\n    ThreadSection: _ThreadSection2.default,\n    MessageSection: _MessageSection2.default\n  },\n  data: function data() {\n    return {\n      modal1: true,\n      formItem: {\n        name: ''\n      }\n    };\n  },\n\n  methods: {\n    ok: function ok() {\n      console.log('ok');\n    },\n    cancel: function cancel() {}\n  }\n};\n\n/***/ }),\n\n/***/ \"I01E\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"chatapp\"\n  }, [_c('thread-section'), _vm._v(\" \"), _c('message-section'), _vm._v(\" \"), _c('Modal', {\n    attrs: {\n      \"title\": \"请输入你的昵称\"\n    },\n    on: {\n      \"on-ok\": _vm.ok,\n      \"on-cancel\": _vm.cancel\n    },\n    model: {\n      value: (_vm.modal1),\n      callback: function($$v) {\n        _vm.modal1 = $$v\n      },\n      expression: \"modal1\"\n    }\n  }, [_c('Form', {\n    attrs: {\n      \"model\": _vm.formItem,\n      \"label-position\": \"right\",\n      \"label-width\": 80\n    }\n  }, [_c('FormItem', {\n    attrs: {\n      \"label\": \"名称\"\n    }\n  }, [_c('Input', {\n    attrs: {\n      \"placeholder\": \"请输入\"\n    },\n    model: {\n      value: (_vm.formItem.name),\n      callback: function($$v) {\n        _vm.formItem.name = $$v\n      },\n      expression: \"formItem.name\"\n    }\n  })], 1)], 1)], 1)], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ \"IcnI\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _vue = __webpack_require__(\"7+uW\");\n\nvar _vue2 = _interopRequireDefault(_vue);\n\nvar _vuex = __webpack_require__(\"NYxO\");\n\nvar _vuex2 = _interopRequireDefault(_vuex);\n\nvar _getters = __webpack_require__(\"UjVw\");\n\nvar getters = _interopRequireWildcard(_getters);\n\nvar _actions = __webpack_require__(\"mUbh\");\n\nvar actions = _interopRequireWildcard(_actions);\n\nvar _mutations = __webpack_require__(\"ukYY\");\n\nvar _mutations2 = _interopRequireDefault(_mutations);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_vue2.default.use(_vuex2.default);\n\nvar state = {\n  currentThreadID: null,\n  threads: {\n    /*\n    id: {\n      id,\n      name,\n      messages: [...ids],\n      lastMessage\n    }\n    */\n  },\n  messages: {\n    /*\n    id: {\n      id,\n      threadId,\n      threadName,\n      authorName,\n      text,\n      timestamp,\n      isRead\n    }\n    */\n  }\n};\n\nexports.default = new _vuex2.default.Store({\n  state: state,\n  getters: getters,\n  actions: actions,\n  mutations: _mutations2.default\n});\n\n/***/ }),\n\n/***/ \"NHnr\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _vue = __webpack_require__(\"7+uW\");\n\nvar _vue2 = _interopRequireDefault(_vue);\n\nvar _vuex = __webpack_require__(\"NYxO\");\n\nvar _vuex2 = _interopRequireDefault(_vuex);\n\nvar _App = __webpack_require__(\"EWfp\");\n\nvar _App2 = _interopRequireDefault(_App);\n\n__webpack_require__(\"hnHT\");\n\n__webpack_require__(\"+skl\");\n\nvar _iview = __webpack_require__(\"BTaQ\");\n\nvar _iview2 = _interopRequireDefault(_iview);\n\nvar _store = __webpack_require__(\"IcnI\");\n\nvar _store2 = _interopRequireDefault(_store);\n\nvar _actions = __webpack_require__(\"mUbh\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_vue2.default.use(_vuex2.default);\n_vue2.default.use(_iview2.default);\n\n_vue2.default.filter('time', function (timestamp) {\n  return new Date(timestamp).toLocaleTimeString();\n});\n\nnew _vue2.default({\n  el: '#app',\n  render: function render(h) {\n    return h(_App2.default);\n  }\n});\n\n(0, _actions.getAllMessages)(_store2.default);\n\n/***/ }),\n\n/***/ \"U7zJ\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('li', {\n    staticClass: \"message-list-item\"\n  }, [_c('h5', {\n    staticClass: \"message-author-name\"\n  }, [_vm._v(_vm._s(_vm.message.authorName))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"message-time\"\n  }, [_vm._v(\"\\n    \" + _vm._s(_vm._f(\"time\")(_vm.message.timestamp)) + \"\\n  \")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"message-text\"\n  }, [_vm._v(_vm._s(_vm.message.text))])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ \"UjVw\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar threads = exports.threads = function threads(state) {\n  return state.threads;\n};\n\nvar currentThread = exports.currentThread = function currentThread(state) {\n  return state.currentThreadID ? state.threads[state.currentThreadID] : {};\n};\n\nvar currentMessages = exports.currentMessages = function currentMessages(state) {\n  var thread = currentThread(state);\n  return thread.messages ? thread.messages.map(function (id) {\n    return state.messages[id];\n  }) : [];\n};\n\n/***/ }),\n\n/***/ \"UnMP\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"thread-section\"\n  }, [_c('div', {\n    staticClass: \"thread-count\"\n  }, [_c('span', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.unreadCount),\n      expression: \"unreadCount\"\n    }]\n  }, [_vm._v(\"\\n      Unread threads: \" + _vm._s(_vm.unreadCount) + \"\\n    \")])]), _vm._v(\" \"), _c('ul', {\n    staticClass: \"thread-list\"\n  }, _vm._l((_vm.threads), function(thread) {\n    return _c('thread', {\n      key: thread.id,\n      attrs: {\n        \"thread\": thread,\n        \"active\": thread.id === _vm.currentThread.id\n      },\n      on: {\n        \"switch-thread\": _vm.switchThread\n      }\n    })\n  }))])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ \"VkeE\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = [{\n  id: 'm_1',\n  threadID: 't_1',\n  threadName: 'Vue-chatroom',\n  authorName: 'Bill',\n  text: 'Hey Jing, want to give a Flux talk at ForwardJS?',\n  timestamp: Date.now() - 99999\n}, {\n  id: 'm_2',\n  threadID: 't_1',\n  threadName: 'Vue-chatroom',\n  authorName: 'Bill',\n  text: 'Seems like a pretty cool conference.',\n  timestamp: Date.now() - 89999\n}, {\n  id: 'm_3',\n  threadID: 't_1',\n  threadName: 'Vue-chatroom',\n  authorName: 'Jing',\n  text: 'Sounds good.  Will they be serving dessert?',\n  timestamp: Date.now() - 79999\n}];\n\n/***/ }),\n\n/***/ \"X1zg\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; //\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nvar _Message = __webpack_require__(\"yJ2L\");\n\nvar _Message2 = _interopRequireDefault(_Message);\n\nvar _vuex = __webpack_require__(\"NYxO\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  name: 'MessageSection',\n  components: { Message: _Message2.default },\n  computed: _extends({}, (0, _vuex.mapGetters)({\n    thread: 'currentThread',\n    messages: 'currentMessages'\n  }), {\n    sortedMessages: function sortedMessages() {\n      return this.messages.slice().sort(function (a, b) {\n        return a.timestamp - b.timestamp;\n      });\n    }\n  }),\n  watch: {\n    'thread.lastMessage': function threadLastMessage() {\n      var _this = this;\n\n      this.$nextTick(function () {\n        var ul = _this.$refs.list;\n        ul.scrollTop = ul.scrollHeight;\n      });\n    }\n  },\n  methods: {\n    sendMessage: function sendMessage(e) {\n      var text = e.target.value;\n      if (text.trim()) {\n        this.$store.dispatch('sendMessage', {\n          text: text,\n          thread: this.thread\n        });\n        e.target.value = '';\n      }\n    }\n  }\n};\n\n/***/ }),\n\n/***/ \"ZiNS\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"X1zg\"),\n  /* template */\n  __webpack_require__(\"m8WK\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"gyMJ\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAllMessages = getAllMessages;\nexports.createMessage = createMessage;\nvar data = __webpack_require__(\"VkeE\");\n\nfunction getAllMessages(cb) {\n  cb(data);\n}\n\nfunction createMessage(_ref, cb) {\n  var text = _ref.text,\n      thread = _ref.thread;\n\n  var timestamp = Date.now();\n  var id = 'm_' + timestamp;\n  var message = {\n    id: id,\n    text: text,\n    timestamp: timestamp,\n    threadID: thread.id,\n    threadName: thread.name,\n    authorName: 'Evan'\n  };\n  cb(message);\n}\n\n/***/ }),\n\n/***/ \"hnHT\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _socket = __webpack_require__(\"DmT9\");\n\nvar _socket2 = _interopRequireDefault(_socket);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar socket = (0, _socket2.default)();\n\n/***/ }),\n\n/***/ \"m8WK\":\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"message-section\"\n  }, [_c('h3', {\n    staticClass: \"message-thread-heading\"\n  }, [_vm._v(_vm._s(_vm.thread.name))]), _vm._v(\" \"), _c('ul', {\n    ref: \"list\",\n    staticClass: \"message-list\"\n  }, _vm._l((_vm.sortedMessages), function(message) {\n    return _c('message', {\n      key: message.id,\n      attrs: {\n        \"message\": message\n      }\n    })\n  })), _vm._v(\" \"), _c('textarea', {\n    staticClass: \"message-composer\",\n    on: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.sendMessage($event)\n      }\n    }\n  })])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ \"mUbh\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.switchThread = exports.sendMessage = exports.getAllMessages = undefined;\n\nvar _api = __webpack_require__(\"gyMJ\");\n\nvar api = _interopRequireWildcard(_api);\n\nvar _mutationTypes = __webpack_require__(\"Du/2\");\n\nvar types = _interopRequireWildcard(_mutationTypes);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar getAllMessages = exports.getAllMessages = function getAllMessages(_ref) {\n  var commit = _ref.commit;\n\n  api.getAllMessages(function (messages) {\n    commit(types.RECEIVE_ALL, {\n      messages: messages\n    });\n  });\n};\n\nvar sendMessage = exports.sendMessage = function sendMessage(_ref2, payload) {\n  var commit = _ref2.commit;\n\n  api.createMessage(payload, function (message) {\n    commit(types.RECEIVE_MESSAGE, {\n      message: message\n    });\n  });\n};\n\nvar switchThread = exports.switchThread = function switchThread(_ref3, payload) {\n  var commit = _ref3.commit;\n\n  commit(types.SWITCH_THREAD, payload);\n};\n\n/***/ }),\n\n/***/ \"ne5N\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexports.default = {\n  name: 'Thread',\n  props: {\n    thread: Object,\n    active: Boolean\n  }\n};\n\n/***/ }),\n\n/***/ \"r3zk\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"/dCH\"),\n  /* template */\n  __webpack_require__(\"UnMP\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ \"ukYY\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _types$RECEIVE_ALL$ty;\n\nvar _vue = __webpack_require__(\"7+uW\");\n\nvar _vue2 = _interopRequireDefault(_vue);\n\nvar _mutationTypes = __webpack_require__(\"Du/2\");\n\nvar types = _interopRequireWildcard(_mutationTypes);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexports.default = (_types$RECEIVE_ALL$ty = {}, _defineProperty(_types$RECEIVE_ALL$ty, types.RECEIVE_ALL, function (state, _ref) {\n  var messages = _ref.messages;\n\n  var latestMessage = void 0;\n  messages.forEach(function (message) {\n    // create new thread if the thread doesn't exist\n    if (!state.threads[message.threadID]) {\n      createThread(state, message.threadID, message.threadName);\n    }\n    // mark the latest message\n    if (!latestMessage || message.timestamp > latestMessage.timestamp) {\n      latestMessage = message;\n    }\n    // add message\n    addMessage(state, message);\n  });\n  // set initial thread to the one with the latest message\n  setCurrentThread(state, latestMessage.threadID);\n}), _defineProperty(_types$RECEIVE_ALL$ty, types.RECEIVE_MESSAGE, function (state, _ref2) {\n  var message = _ref2.message;\n\n  addMessage(state, message);\n}), _defineProperty(_types$RECEIVE_ALL$ty, types.SWITCH_THREAD, function (state, _ref3) {\n  var id = _ref3.id;\n\n  setCurrentThread(state, id);\n}), _types$RECEIVE_ALL$ty);\n\n\nfunction createThread(state, id, name) {\n  _vue2.default.set(state.threads, id, {\n    id: id,\n    name: name,\n    messages: [],\n    lastMessage: null\n  });\n}\n\nfunction addMessage(state, message) {\n  // add a `isRead` field before adding the message\n  message.isRead = message.threadID === state.currentThreadID;\n  // add it to the thread it belongs to\n  var thread = state.threads[message.threadID];\n  if (!thread.messages.some(function (id) {\n    return id === message.id;\n  })) {\n    thread.messages.push(message.id);\n    thread.lastMessage = message;\n  }\n  // add it to the messages map\n  _vue2.default.set(state.messages, message.id, message);\n}\n\nfunction setCurrentThread(state, id) {\n  state.currentThreadID = id;\n  if (!state.threads[id]) {\n    debugger;\n  }\n  // mark thread as read\n  state.threads[id].lastMessage.isRead = true;\n}\n\n/***/ }),\n\n/***/ \"vaj8\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexports.default = {\n  name: 'Message',\n  props: {\n    message: Object\n  }\n};\n\n/***/ }),\n\n/***/ \"yJ2L\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(\"VU/8\")(\n  /* script */\n  __webpack_require__(\"vaj8\"),\n  /* template */\n  __webpack_require__(\"U7zJ\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ })\n\n},[\"NHnr\"]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.3429374cf941f57ec9a9.js","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Thread.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-59362ba2\\\",\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Thread.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Thread.vue\n// module id = /NAZ\n// module chunks = 1","<template>\n  <div class=\"thread-section\">\n    <div class=\"thread-count\">\n      <span v-show=\"unreadCount\">\n        Unread threads: {{ unreadCount }}\n      </span>\n    </div>\n    <ul class=\"thread-list\">\n      <thread\n        v-for=\"thread in threads\"\n        :key=\"thread.id\"\n        :thread=\"thread\"\n        :active=\"thread.id === currentThread.id\"\n        @switch-thread=\"switchThread\">\n      </thread>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport Thread from './Thread.vue'\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: 'ThreadSection',\n  components: { Thread },\n  computed: {\n    ...mapGetters([\n      'threads',\n      'currentThread'\n    ]),\n    unreadCount () {\n      const threads = this.threads\n      return Object.keys(threads).reduce((count, id) => {\n        return threads[id].lastMessage.isRead\n          ? count\n          : count + 1\n      }, 0)\n    }\n  },\n  methods: {\n    switchThread (id) {\n      this.$store.dispatch('switchThread', { id })\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// ThreadSection.vue?7d1e2923","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('li', {\n    staticClass: \"thread-list-item\",\n    class: {\n      active: _vm.active\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.$emit('switch-thread', _vm.thread.id)\n      }\n    }\n  }, [_c('h5', {\n    staticClass: \"thread-name\"\n  }, [_vm._v(_vm._s(_vm.thread.name))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"thread-time\"\n  }, [_vm._v(\"\\n    \" + _vm._s(_vm._f(\"time\")(_vm.thread.lastMessage.timestamp)) + \"\\n  \")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"thread-last-message\"\n  }, [_vm._v(\"\\n    \" + _vm._s(_vm.thread.lastMessage.text) + \"\\n  \")])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-59362ba2\",\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Thread.vue\n// module id = 1LZN\n// module chunks = 1","export const SWITCH_THREAD = 'SWITCH_THREAD'\nexport const RECEIVE_ALL = 'RECEIVE_ALL'\nexport const RECEIVE_MESSAGE = 'RECEIVE_MESSAGE'\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/mutation-types.js","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-24f8978e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../css/chatroom.css\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-24f8978e\\\",\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/App.vue\n// module id = EWfp\n// module chunks = 1","<style src=\"../css/chatroom.css\"></style>\n\n<template>\n  <div class=\"chatapp\">\n    <thread-section></thread-section>\n    <message-section></message-section>\n    <Modal\n        v-model=\"modal1\"\n        title=\"请输入你的昵称\"\n        @on-ok=\"ok\"\n        @on-cancel=\"cancel\">\n        <Form :model=\"formItem\" label-position=\"right\" :label-width=\"80\">\n          <FormItem label=\"名称\">\n            <Input v-model=\"formItem.name\" placeholder=\"请输入\"></Input>\n          </FormItem>\n        </Form>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport ThreadSection from './ThreadSection.vue'\nimport MessageSection from './MessageSection.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    ThreadSection,\n    MessageSection\n  },\n  data() {\n    return {\n      modal1: true,\n      formItem: {\n        name: ''\n      }\n    }\n  },\n  methods: {\n    ok() {\n      console.log('ok');\n    },\n    cancel() {\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?8f9bee82","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"chatapp\"\n  }, [_c('thread-section'), _vm._v(\" \"), _c('message-section'), _vm._v(\" \"), _c('Modal', {\n    attrs: {\n      \"title\": \"请输入你的昵称\"\n    },\n    on: {\n      \"on-ok\": _vm.ok,\n      \"on-cancel\": _vm.cancel\n    },\n    model: {\n      value: (_vm.modal1),\n      callback: function($$v) {\n        _vm.modal1 = $$v\n      },\n      expression: \"modal1\"\n    }\n  }, [_c('Form', {\n    attrs: {\n      \"model\": _vm.formItem,\n      \"label-position\": \"right\",\n      \"label-width\": 80\n    }\n  }, [_c('FormItem', {\n    attrs: {\n      \"label\": \"名称\"\n    }\n  }, [_c('Input', {\n    attrs: {\n      \"placeholder\": \"请输入\"\n    },\n    model: {\n      value: (_vm.formItem.name),\n      callback: function($$v) {\n        _vm.formItem.name = $$v\n      },\n      expression: \"formItem.name\"\n    }\n  })], 1)], 1)], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-24f8978e\",\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/App.vue\n// module id = I01E\n// module chunks = 1","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport * as getters from './getters'\nimport * as actions from './actions'\nimport mutations from './mutations'\n\nVue.use(Vuex)\n\nconst state = {\n  currentThreadID: null,\n  threads: {\n    /*\n    id: {\n      id,\n      name,\n      messages: [...ids],\n      lastMessage\n    }\n    */\n  },\n  messages: {\n    /*\n    id: {\n      id,\n      threadId,\n      threadName,\n      authorName,\n      text,\n      timestamp,\n      isRead\n    }\n    */\n  }\n}\n\nexport default new Vuex.Store({\n  state,\n  getters,\n  actions,\n  mutations,\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport App from './components/App.vue'\nimport './js/socket'\nimport 'iview/dist/styles/iview.css'\nimport iView from 'iview';\nimport store from './store'\nimport { getAllMessages } from './store/actions'\n\nVue.use(Vuex);\nVue.use(iView);\n\nVue.filter('time', timestamp => {\n  return new Date(timestamp).toLocaleTimeString()\n})\n\nnew Vue({\n  el: '#app',\n  render: h => h(App)\n})\n\ngetAllMessages(store);\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('li', {\n    staticClass: \"message-list-item\"\n  }, [_c('h5', {\n    staticClass: \"message-author-name\"\n  }, [_vm._v(_vm._s(_vm.message.authorName))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"message-time\"\n  }, [_vm._v(\"\\n    \" + _vm._s(_vm._f(\"time\")(_vm.message.timestamp)) + \"\\n  \")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"message-text\"\n  }, [_vm._v(_vm._s(_vm.message.text))])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-290bd71f\",\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Message.vue\n// module id = U7zJ\n// module chunks = 1","export const threads = state => state.threads\n\nexport const currentThread = state => {\n  return state.currentThreadID\n    ? state.threads[state.currentThreadID]\n    : {}\n}\n\nexport const currentMessages = state => {\n  const thread = currentThread(state)\n  return thread.messages\n    ? thread.messages.map(id => state.messages[id])\n    : []\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/getters.js","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"thread-section\"\n  }, [_c('div', {\n    staticClass: \"thread-count\"\n  }, [_c('span', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.unreadCount),\n      expression: \"unreadCount\"\n    }]\n  }, [_vm._v(\"\\n      Unread threads: \" + _vm._s(_vm.unreadCount) + \"\\n    \")])]), _vm._v(\" \"), _c('ul', {\n    staticClass: \"thread-list\"\n  }, _vm._l((_vm.threads), function(thread) {\n    return _c('thread', {\n      key: thread.id,\n      attrs: {\n        \"thread\": thread,\n        \"active\": thread.id === _vm.currentThread.id\n      },\n      on: {\n        \"switch-thread\": _vm.switchThread\n      }\n    })\n  }))])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0ec3f2da\",\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ThreadSection.vue\n// module id = UnMP\n// module chunks = 1","module.exports = [\n  {\n    id: 'm_1',\n    threadID: 't_1',\n    threadName: 'Vue-chatroom',\n    authorName: 'Bill',\n    text: 'Hey Jing, want to give a Flux talk at ForwardJS?',\n    timestamp: Date.now() - 99999\n  },\n  {\n    id: 'm_2',\n    threadID: 't_1',\n    threadName: 'Vue-chatroom',\n    authorName: 'Bill',\n    text: 'Seems like a pretty cool conference.',\n    timestamp: Date.now() - 89999\n  },\n  {\n    id: 'm_3',\n    threadID: 't_1',\n    threadName: 'Vue-chatroom',\n    authorName: 'Jing',\n    text: 'Sounds good.  Will they be serving dessert?',\n    timestamp: Date.now() - 79999\n  }\n]\n\n\n// WEBPACK FOOTER //\n// ./src/api/mock.js","<template>\n  <div class=\"message-section\">\n    <h3 class=\"message-thread-heading\">{{ thread.name }}</h3>\n    <ul class=\"message-list\" ref=\"list\">\n      <message\n        v-for=\"message in sortedMessages\"\n        :key=\"message.id\"\n        :message=\"message\">\n      </message>\n    </ul>\n    <textarea class=\"message-composer\" @keyup.enter=\"sendMessage\"></textarea>\n  </div>\n</template>\n\n<script>\nimport Message from './Message.vue'\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: 'MessageSection',\n  components: { Message },\n  computed: {\n    ...mapGetters({\n      thread: 'currentThread',\n      messages: 'currentMessages'\n    }),\n    sortedMessages () {\n      return this.messages\n        .slice()\n        .sort((a, b) => a.timestamp - b.timestamp)\n    }\n  },\n  watch: {\n    'thread.lastMessage': function () {\n      this.$nextTick(() => {\n        const ul = this.$refs.list\n        ul.scrollTop = ul.scrollHeight\n      })\n    }\n  },\n  methods: {\n    sendMessage (e) {\n      const text = e.target.value\n      if (text.trim()) {\n        this.$store.dispatch('sendMessage', {\n          text,\n          thread: this.thread\n        })\n        e.target.value = ''\n      }\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// MessageSection.vue?519b0843","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MessageSection.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7dd63714\\\",\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./MessageSection.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/MessageSection.vue\n// module id = ZiNS\n// module chunks = 1","const data = require('./mock')\n\nexport function getAllMessages (cb) {\n  cb(data);\n}\n\nexport function createMessage ({ text, thread }, cb) {\n  const timestamp = Date.now()\n  const id = 'm_' + timestamp\n  const message = {\n    id,\n    text,\n    timestamp,\n    threadID: thread.id,\n    threadName: thread.name,\n    authorName: 'Evan'\n  }\n  cb(message);\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/index.js","import io from 'socket.io-client'\n\nconst socket = io();\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/socket.js","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"message-section\"\n  }, [_c('h3', {\n    staticClass: \"message-thread-heading\"\n  }, [_vm._v(_vm._s(_vm.thread.name))]), _vm._v(\" \"), _c('ul', {\n    ref: \"list\",\n    staticClass: \"message-list\"\n  }, _vm._l((_vm.sortedMessages), function(message) {\n    return _c('message', {\n      key: message.id,\n      attrs: {\n        \"message\": message\n      }\n    })\n  })), _vm._v(\" \"), _c('textarea', {\n    staticClass: \"message-composer\",\n    on: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.sendMessage($event)\n      }\n    }\n  })])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7dd63714\",\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MessageSection.vue\n// module id = m8WK\n// module chunks = 1","import * as api from '../api'\nimport * as types from './mutation-types'\n\nexport const getAllMessages = ({ commit }) => {\n  api.getAllMessages(messages => {\n    commit(types.RECEIVE_ALL, {\n      messages\n    })\n  })\n}\n\nexport const sendMessage = ({ commit }, payload) => {\n  api.createMessage(payload, message => {\n    commit(types.RECEIVE_MESSAGE, {\n      message\n    })\n  })\n}\n\nexport const switchThread = ({ commit }, payload) => {\n  commit(types.SWITCH_THREAD, payload)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/actions.js","<template>\n  <li\n    class=\"thread-list-item\"\n    :class=\"{ active: active }\"\n    @click=\"$emit('switch-thread', thread.id)\">\n    <h5 class=\"thread-name\">{{ thread.name }}</h5>\n    <div class=\"thread-time\">\n      {{ thread.lastMessage.timestamp | time }}\n    </div>\n    <div class=\"thread-last-message\">\n      {{ thread.lastMessage.text }}\n    </div>\n  </li>\n</template>\n\n<script>\nexport default {\n  name: 'Thread',\n  props: {\n    thread: Object,\n    active: Boolean\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// Thread.vue?54b0c4e2","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ThreadSection.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0ec3f2da\\\",\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ThreadSection.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ThreadSection.vue\n// module id = r3zk\n// module chunks = 1","import Vue from 'vue'\nimport * as types from './mutation-types'\n\nexport default {\n  [types.RECEIVE_ALL] (state, { messages }) {\n    let latestMessage\n    messages.forEach(message => {\n      // create new thread if the thread doesn't exist\n      if (!state.threads[message.threadID]) {\n        createThread(state, message.threadID, message.threadName)\n      }\n      // mark the latest message\n      if (!latestMessage || message.timestamp > latestMessage.timestamp) {\n        latestMessage = message\n      }\n      // add message\n      addMessage(state, message)\n    })\n    // set initial thread to the one with the latest message\n    setCurrentThread(state, latestMessage.threadID)\n  },\n\n  [types.RECEIVE_MESSAGE] (state, { message }) {\n    addMessage(state, message)\n  },\n\n  [types.SWITCH_THREAD] (state, { id }) {\n    setCurrentThread(state, id)\n  }\n}\n\nfunction createThread (state, id, name) {\n  Vue.set(state.threads, id, {\n    id,\n    name,\n    messages: [],\n    lastMessage: null\n  })\n}\n\nfunction addMessage (state, message) {\n  // add a `isRead` field before adding the message\n  message.isRead = message.threadID === state.currentThreadID\n  // add it to the thread it belongs to\n  const thread = state.threads[message.threadID]\n  if (!thread.messages.some(id => id === message.id)) {\n    thread.messages.push(message.id)\n    thread.lastMessage = message\n  }\n  // add it to the messages map\n  Vue.set(state.messages, message.id, message)\n}\n\nfunction setCurrentThread (state, id) {\n  state.currentThreadID = id\n  if (!state.threads[id]) {\n    debugger\n  }\n  // mark thread as read\n  state.threads[id].lastMessage.isRead = true\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/mutations.js","<template>\n  <li class=\"message-list-item\">\n    <h5 class=\"message-author-name\">{{ message.authorName }}</h5>\n    <div class=\"message-time\">\n      {{ message.timestamp | time }}\n    </div>\n    <div class=\"message-text\">{{ message.text }}</div>\n  </li>\n</template>\n\n<script>\nexport default {\n  name: 'Message',\n  props: {\n    message: Object\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// Message.vue?bc246c84","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Message.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-290bd71f\\\",\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Message.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Message.vue\n// module id = yJ2L\n// module chunks = 1"],"sourceRoot":""}